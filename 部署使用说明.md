# Tingdao.org yt-dlp Extractor éƒ¨ç½²ä½¿ç”¨æŒ‡å—

è¿™æ˜¯ä¸€ä¸ªä¸º yt-dlp å¼€å‘çš„æ‰©å±•å™¨ï¼Œç”¨äºä¸‹è½½ tingdao.org ç½‘ç«™çš„éŸ³é¢‘å†…å®¹ã€‚

## ğŸ¯ åŠŸèƒ½ç‰¹æ€§

- âœ… æ”¯æŒå•ä¸ªéŸ³é¢‘ä¸‹è½½
- âœ… æ”¯æŒå®Œæ•´æ’­æ”¾åˆ—è¡¨ä¸‹è½½ï¼ˆå…±8é›†ï¼‰
- âœ… å¤‡ç”¨éŸ³é¢‘æºæœºåˆ¶ç¡®ä¿ä¸‹è½½å¯é æ€§
- âœ… å®Œæ•´å…ƒæ•°æ®æ”¯æŒï¼ˆæ ‡é¢˜ã€æ—¶é—´æˆ³ã€ä½œè€…ç­‰ï¼‰
- âœ… ä¸ Metube å®Œå…¨å…¼å®¹
- âœ… å¥å£®çš„é”™è¯¯å¤„ç†

## ğŸ“‹ æ”¯æŒçš„URLæ ¼å¼

```
https://www.tingdao.org/dist/#/Media?device=mobile&id=11869
https://www.tingdao.org/dist/#/Media?id=11868
```

## ğŸš€ éƒ¨ç½²æ–¹å¼

### æ–¹å¼ä¸€ï¼šMetube æ’ä»¶ç³»ç»Ÿï¼ˆæ¨èï¼‰

è¿™æ˜¯æœ€ç®€å•çš„éƒ¨ç½²æ–¹å¼ï¼Œé€‚åˆå·²æœ‰ Metube ç¯å¢ƒçš„ç”¨æˆ·ã€‚

#### 1. å‡†å¤‡æ’ä»¶ç›®å½•

```bash
# åœ¨ä½ çš„ Metube ç›®å½•ä¸­åˆ›å»ºæ’ä»¶ç›®å½•
mkdir -p plugins/tingdao
```

#### 2. å¤åˆ¶æ’ä»¶æ–‡ä»¶

```bash
# å¤åˆ¶æ’ä»¶åˆ°æŒ‡å®šç›®å½•
cp -r metube_plugin/yt_dlp_plugins plugins/tingdao/
```

#### 3. ä¿®æ”¹ Docker Compose é…ç½®

åœ¨ä½ çš„ `docker-compose.yml` æ–‡ä»¶ä¸­æ·»åŠ  volume æ˜ å°„ï¼š

```yaml
services:
  metube:
    image: alexta69/metube
    ports:
      - "8081:8081"
    volumes:
      - "./downloads:/downloads"
      - "./plugins:/app/.config/yt-dlp/plugins"  # æ·»åŠ è¿™è¡Œ
    environment:
      - DOWNLOAD_DIR=/downloads
      - AUDIO_DOWNLOAD_DIR=/downloads/audio
```

#### 4. é‡å¯ Metube

```bash
docker-compose down
docker-compose up -d
```

#### 5. éªŒè¯å®‰è£…

åœ¨ Metube Web ç•Œé¢ä¸­æµ‹è¯• tingdao.org é“¾æ¥ï¼š
```
https://www.tingdao.org/dist/#/Media?device=mobile&id=11869
```

### æ–¹å¼äºŒï¼šæœ¬åœ° yt-dlp å¼€å‘å®‰è£…

é€‚åˆå¼€å‘è€…æˆ–éœ€è¦è‡ªå®šä¹‰ yt-dlp çš„ç”¨æˆ·ã€‚

#### 1. å…‹éš† yt-dlp ä»“åº“

```bash
git clone https://github.com/yt-dlp/yt-dlp.git
cd yt-dlp
```

#### 2. å®‰è£…æ‰©å±•å™¨

```bash
# å¤åˆ¶æ‰©å±•å™¨æ–‡ä»¶
cp yt_dlp_extractor/tingdao.py yt_dlp/extractor/

# æ³¨å†Œæ‰©å±•å™¨
echo "from .tingdao import TingdaoIE" >> yt_dlp/extractor/_extractors.py
```

#### 3. å®‰è£…å¼€å‘ç‰ˆæœ¬

```bash
pip install -e .
```

#### 4. æµ‹è¯•å®‰è£…

```bash
yt-dlp --list-extractors | grep -i tingdao
```

## ğŸ“– ä½¿ç”¨æ–¹æ³•

### åœ¨ Metube ä¸­ä½¿ç”¨

1. æ‰“å¼€ Metube Web ç•Œé¢ (é€šå¸¸æ˜¯ http://localhost:8081)
2. åœ¨ URL è¾“å…¥æ¡†ä¸­ç²˜è´´ tingdao.org é“¾æ¥
3. é€‰æ‹©éŸ³é¢‘æ ¼å¼å’Œè´¨é‡
4. ç‚¹å‡» "Add" å¼€å§‹ä¸‹è½½

### åœ¨å‘½ä»¤è¡Œä¸­ä½¿ç”¨

#### ä¸‹è½½å•ä¸ªéŸ³é¢‘

```bash
yt-dlp "https://www.tingdao.org/dist/#/Media?device=mobile&id=11869"
```

#### ä¸‹è½½æ•´ä¸ªæ’­æ”¾åˆ—è¡¨

```bash
yt-dlp "https://www.tingdao.org/dist/#/Media?device=mobile&id=11869" --yes-playlist
```

#### ä»…æå–ä¿¡æ¯ï¼ˆä¸ä¸‹è½½ï¼‰

```bash
yt-dlp "https://www.tingdao.org/dist/#/Media?device=mobile&id=11869" --dump-json
```

#### é€‰æ‹©å¤‡ç”¨æº

```bash
yt-dlp "https://www.tingdao.org/dist/#/Media?device=mobile&id=11869" -f backup
```

## ğŸ”§ é«˜çº§é…ç½®

### è‡ªå®šä¹‰è¾“å‡ºæ¨¡æ¿

```bash
yt-dlp "https://www.tingdao.org/dist/#/Media?device=mobile&id=11869" \
  -o "%(uploader)s/%(playlist)s/%(playlist_index)02d - %(title)s.%(ext)s"
```

### é™åˆ¶ä¸‹è½½é€Ÿåº¦

```bash
yt-dlp "https://www.tingdao.org/dist/#/Media?device=mobile&id=11869" \
  --limit-rate 1M
```

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ’ä»¶æœªè¢«è¯†åˆ«ï¼ˆé‡è¦ï¼‰

**ç—‡çŠ¶**: yt-dlp æç¤º "Unsupported URL" æˆ– "Falling back on generic information extractor"

**åŸå› **: yt-dlp æ’ä»¶ç³»ç»Ÿåœ¨æŸäº›ç¯å¢ƒä¸‹å¯èƒ½æ— æ³•æ­£ç¡®åŠ è½½æ’ä»¶

**è§£å†³æ–¹æ¡ˆ**: ä½¿ç”¨ç›´æ¥å®‰è£…æ–¹æ³•

```bash
# æ–¹æ³•1: ç›´æ¥å¤åˆ¶åˆ° yt-dlp å®‰è£…ç›®å½•ï¼ˆæ¨èï¼‰
# 1. æ‰¾åˆ° yt-dlp å®‰è£…ä½ç½®
python -c "import yt_dlp; print(yt_dlp.__file__)"

# 2. å¤åˆ¶æ‰©å±•å™¨æ–‡ä»¶ï¼ˆæ›¿æ¢ä¸ºå®é™…è·¯å¾„ï¼‰
cp yt_dlp_extractor/tingdao.py /path/to/yt_dlp/extractor/

# 3. æ³¨å†Œæ‰©å±•å™¨
echo "from .tingdao import TingdaoIE" >> /path/to/yt_dlp/extractor/_extractors.py

# 4. éªŒè¯å®‰è£…
yt-dlp --list-extractors | grep -i tingdao
```

**Metube ç¯å¢ƒä¸‹çš„è§£å†³æ–¹æ¡ˆ**:

```bash
# åœ¨ Metube ç›®å½•ä¸‹æ‰§è¡Œ
# 1. æ‰¾åˆ° pipenv ç¯å¢ƒä¸­çš„ yt-dlp ä½ç½®
pipenv run python -c "import yt_dlp; print(yt_dlp.__file__)"

# 2. å¤åˆ¶æ‰©å±•å™¨
cp yt_dlp_extractor/tingdao.py $(pipenv run python -c "import yt_dlp; import os; print(os.path.dirname(yt_dlp.__file__))")/extractor/

# 3. æ³¨å†Œæ‰©å±•å™¨
echo "from .tingdao import TingdaoIE" >> $(pipenv run python -c "import yt_dlp; import os; print(os.path.dirname(yt_dlp.__file__))")/extractor/_extractors.py
```

#### 2. "å‚æ•°ä¸å®Œæ•´" é”™è¯¯

è¿™é€šå¸¸è¡¨ç¤ºç½‘ç»œé—®é¢˜æˆ– API æš‚æ—¶ä¸å¯ç”¨ã€‚è§£å†³æ–¹æ³•ï¼š
- æ£€æŸ¥ç½‘ç»œè¿æ¥
- ç¨åé‡è¯•
- æ£€æŸ¥ URL æ˜¯å¦æ­£ç¡®

#### 3. ä¸‹è½½å¤±è´¥

```bash
# å¢åŠ è¯¦ç»†è¾“å‡ºæŸ¥çœ‹é”™è¯¯
yt-dlp "URL" --verbose

# æˆ–è€…å¯ç”¨è°ƒè¯•æ¨¡å¼
yt-dlp "URL" --debug
```

#### 4. Metube ä¸­æ— æ³•ä½¿ç”¨

æ£€æŸ¥ä»¥ä¸‹æ­¥éª¤ï¼š
1. é¦–å…ˆå°è¯•ä¸Šè¿°ç›´æ¥å®‰è£…æ–¹æ³•
2. ç¡®è®¤æ’ä»¶ç›®å½•æ­£ç¡®æ˜ å°„åˆ°å®¹å™¨ä¸­
3. é‡å¯ Metube å®¹å™¨
4. æ£€æŸ¥å®¹å™¨æ—¥å¿—ï¼š`docker logs metube_container_name`

### è°ƒè¯•æ¨¡å¼

å¯ç”¨è¯¦ç»†è¾“å‡ºå’Œè°ƒè¯•ä¿¡æ¯ï¼š

```bash
yt-dlp "https://www.tingdao.org/dist/#/Media?device=mobile&id=11869" \
  --verbose --debug --write-info-json
```

## ğŸ“Š æŠ€æœ¯è¯¦æƒ…

### API æ¶æ„

æ‰©å±•å™¨ä½¿ç”¨ä»¥ä¸‹ API ç«¯ç‚¹ï¼š
- **ä¸»è¦ç«¯ç‚¹**: `https://www.tingdao.org/Record/exhibitions`
- **å‚æ•°æ ¼å¼**: `ypid={media_id}&userid=`
- **å“åº”æ ¼å¼**: JSONï¼ŒåŒ…å« `mediaList` å’Œ `authorMsg`

### æ•°æ®ç»“æ„

```json
{
  "status": 1,
  "list": {
    "mediaList": [
      {
        "id": "11869",
        "title": "éŸ³é¢‘æ ‡é¢˜",
        "video_url": "ä¸»è¦éŸ³é¢‘æº",
        "videos_url": "å¤‡ç”¨éŸ³é¢‘æº",
        "add_time": "2020-03-28 19:45:26"
      }
    ],
    "authorMsg": {
      "id": "1190",
      "title": "æ’­æ”¾åˆ—è¡¨æ ‡é¢˜",
      "author": "ä½œè€…å§“å"
    }
  }
}
```

### å¤‡ç”¨æºæœºåˆ¶

å½“ä¸»è¦éŸ³é¢‘æº (`video_url`) ä¸å¯ç”¨æ—¶ï¼Œæ‰©å±•å™¨ä¼šè‡ªåŠ¨å°è¯•å¤‡ç”¨æº (`videos_url`)ï¼Œç¡®ä¿ä¸‹è½½æˆåŠŸç‡ã€‚

## âš ï¸ é‡è¦è¯´æ˜

æœ¬æ‰©å±•å™¨ä»…ç”¨äºåˆæ³•çš„ä¸ªäººå­¦ä¹ å’Œç ”ç©¶ç›®çš„ï¼Œè¯·éµå®ˆç›¸å…³ç½‘ç«™çš„ä½¿ç”¨æ¡æ¬¾ã€‚